@tailwind base;
@tailwind components;
@tailwind utilities;

/* Proposed additions to index.css (append these near the end of the file or into your utilities layer)
   Purpose:
   - Make bubble & tail animate together using group-hover
   - Ensure chat images cover the bubble and show a thin outline
   - Small responsive tweaks for auth/profile pages
*/

/* 1) Animate bubble and tail together (DaisyUI chat uses pseudo-elements for the tail).
   We apply a scale on group hover to both the bubble and its pseudo-elements.
   This does not remove existing chat styles; it only ensures the tail transforms when the bubble scales.
*/
.chat.group:hover .chat-bubble {
  transform: scale(1.02);
  transition: transform 160ms cubic-bezier(.2,.9,.2,1);
}

/* Ensure transform origin is appropriate for sent vs received */
.chat.chat-start.group:hover .chat-bubble {
  transform-origin: left top;
}
.chat.chat-end.group:hover .chat-bubble {
  transform-origin: right top;
}

/* DaisyUI may render tail via ::before or ::after on .chat-bubble or .chat,
   target both just in case so the tail scales with the bubble */
.chat-bubble::before,
.chat-bubble::after,
.chat::before,
.chat::after {
  transition: transform 160ms cubic-bezier(.2,.9,.2,1), background-color 120ms ease;
}

/* Scale pseudo-elements with the bubble on group hover */
.chat.group:hover .chat-bubble::before,
.chat.group:hover .chat-bubble::after,
.chat.group:hover .chat::before,
.chat.group:hover .chat::after {
  transform: scale(1.02);
  transform-origin: left top;
}

/* For chat-end (right-side), adjust transform-origin so tail grows from right side */
.chat.chat-end.group:hover .chat-bubble::before,
.chat.chat-end.group:hover .chat-bubble::after,
.chat.chat-end.group:hover .chat::before,
.chat.chat-end.group:hover .chat::after {
  transform-origin: right top;
}

/* 2) Chat image rules: make sent images almost fully fill bubble with thin outline */
.chat-bubble img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover; /* ensures cover behavior like Telegram */
  border-radius: 0.5rem; /* matches rounded corners */
}

/* The image container used above has a 1px border; make it subtle on dark/light */
.chat-bubble > .relative.border {
  background-clip: padding-box;
  overflow: hidden;
}

/* Slight shadow to match bubble look */
.chat-bubble > .relative img {
  box-shadow: 0 1px 0 rgba(0,0,0,0.04);
}

/* Make single images a bit larger on small screens to use available width */
@media (max-width: 480px) {
  .chat-bubble > .relative.w-full.h-\[280px\] {
    height: calc((100vw - 64px) * 0.6); /* responsive height so it fits */
  }

  /* ensure chat area paddings allow image to fill bubble nicely */
  .flex-1.overflow-y-auto.p-4 {
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* 3) Responsive tweaks for Auth and Profile pages */

/* Login/register pages: make form column centered, stack nicely on narrow screens */
@media (max-width: 1024px) {
  /* If page uses .h-screen.grid.lg:grid-cols-2 (as LoginPage does), ensure the right-side pattern isn't visible on smaller screens */
  .auth-image-pattern {
    display: none;
  }
}

/* Make auth left form use more breathing room on tiny screens */
@media (max-width: 520px) {
  .flex.flex-col.justify-center.items-center.p-6 {
    padding: 18px !important;
  }
  .w-full.max-w-md.space-y-8 {
    padding: 8px;
  }
}

/* Profile page: stack sidebar and main content */
@media (max-width: 880px) {
  .profile-grid {
    display: block;
    padding: 12px;
  }
  .profile-sidebar {
    margin-bottom: 16px;
  }
  .profile-avatar {
    width: 120px;
    height: 120px;
  }
}